<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>Hello MUI</title>
		<meta http-equiv="expires" content="0">
		<meta http-equiv="cache-control" content="no-cache">
		<meta http-equiv="pragma" content="no-cache">
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
			
		<title></title>
		<link rel="stylesheet" type="text/css" href="../css/mui/mui.min.css"/>
		<link rel="stylesheet" type="text/css" href="../css/My_css/ico.css"/>
		<link rel="stylesheet" type="text/css" href="../css/My_css/global.css"/>
		<link rel="stylesheet" type="text/css" href="../css/My_css/shurufa.css"/>
		<style>
			/* 无缝DIV */
			.mui-views,.mui-view, .mui-pages,.mui-page,.mui-page-content {position: absolute;left: 0;right: 0;top: 0;bottom: 0;width: 100%;height: 100%;background-color: #efeff4;}
			.mui-pages {top: 10px;height: auto;}
			.mui-page.mui-transitioning {-webkit-transition: -webkit-transform 300ms ease;transition: transform 300ms ease;}
			.mui-page-left {-webkit-transform: translate3d(0, 0, 0);transform: translate3d(0, 0, 0);}
			.mui-ios .mui-page-left {-webkit-transform: translate3d(-20%, 0, 0);transform: translate3d(-20%, 0, 0);}		
			.mui-page {display: none;}
			.mui-pages .mui-page {display: block;}			
			
			/* my */
			.mybtn{ width:40%;height:100px;text-align: center;margin: 20px 5%; font-family: "微软雅黑";float:left;border-radius: 7px;font-size:18px;}
			.xingweiname{position: relative;top:-5px;}
			
		</style>
	</head>

	<body>
		 
		
		<!--页面主结构开始-->
		<div id="app" class="mui-views">
			<div class="mui-view">			
				<div class="mui-pages">
								
				</div>					
			</div>
		</div>
		<!--页面主结构结束-->
		
		 
		
		<!--主页开始-->
		<div id="Main" class="mui-page">	
			<div class="mui-page-content"> 
					<a href="#set" class=""><button type="button" class="mybtn mui-btn mui-btn-block"  ><i class="iconfont">&#xe61e;</i>&nbsp;&nbsp;<span class="xingweiname">商户收包裹</span></button></a>
					<a href="#get" class="mui-col-xs-6"><button type="button" class="mybtn mui-btn mui-btn-block"  ><i class="iconfont">&#xe610;</i>&nbsp;&nbsp;<span class="xingweiname">顾客取包裹</span></button></a>
					<a href="#refuse" class="mui-col-xs-6"><button type="button" class="mybtn mui-btn mui-btn-block"  ><i class="iconfont">&#xe613;</i>&nbsp;&nbsp;<span class="xingweiname">商户拒收包裹</span></button></a>
					<a href="DaiShou_info.html?new=7" class="mui-col-xs-6"><button type="button" class="mybtn mui-btn mui-btn-block" ><i class="iconfont">&#xe612;</i>&nbsp;&nbsp;<span class="xingweiname">包裹记录查询</span></button></a>
			</div>  
		</div> 
		<!--主页结束--> 
		  
		  
		     
		   
		   
		 
		<!-- 商户收包裹 开始 -->
		<div id="set" class="mui-page" style="z-index: 1;">	
			<div class="mui-page-content">			
					<a href="#cainiaobaoguo"  ><button type="button" class="mybtn mui-btn mui-btn-block"><i class="iconfont">&#xe615;</i>&nbsp;&nbsp;<span class="xingweiname">菜鸟驿站</span></button></a>
					<a href="#qitabaoguo" ><button type="button" class="mybtn mui-btn mui-btn-block"><i class="iconfont">&#xe616;</i>&nbsp;&nbsp;<span class="xingweiname">其他包裹</span></button></a>		
			</div>				
		</div>  
		<!--商户收包裹结束--> 
		
		   
		  
		  
		<div id="cainiaobaoguo" class="mui-page" style="z-index: 2;">			
			<div class="mui-page-content">				
				 <div class="mui-input-group">
					<div class="mui-input-row">
						<label>包裹单号</label>
						<input id='cainiaobaoguo_orderid' onclick="shurufa_open_num(this)" readonly="readonly"  type="text" class="mui-input-clear mui-input" placeholder="请输入包裹单号" />
					</div>	
				</div> 		
				<div class="mui-content-padded" align="center">
					<button id="cainiaobaoguo_btn" class="mui-btn mui-btn-block mui-btn-primary">确定</button>
				</div>
			</div> 
		</div> 
		 
		  
		
		<div id="qitabaoguo" class="mui-page" style="z-index: 2;">			
			<div class="mui-page-content">			
				<div class="mui-input-group">
					<div class="mui-input-row">
						<label>包裹单号</label>
						<input id='qitabaoguo_orderid' onclick="shurufa_open_num(this)" readonly="readonly" type="text" class="mui-input-clear mui-input" placeholder="请输入包裹单号">
					</div>	
					<div class="mui-input-row">
						<label>手机号码</label>
						<input id='qitabaoguo_phone' onclick="shurufa_open_num(this)" readonly="readonly" type="text" class="mui-input-clear mui-input" placeholder="请输入手机号码" />
					</div>								
				</div> 			
				<div class="mui-content-padded" align="center">
					<button id="qitabaoguo_btn" class="mui-btn mui-btn-block mui-btn-primary">确定</button>
				</div>
			</div>			
		</div> 
		
		   
		   
		  
		  
		<!--顾客取包裹开始    这里的Get是关键字，所以需要变成小写 -->
		<div id="get" class="mui-page" style="z-index: 1;">
			<div class="mui-page-content">
					<div class="mui-input-group">
						<div class="mui-input-row">
							<label>条形码</label>
							<input id='get_orderid' onclick="shurufa_open_num(this)" readonly="readonly" type="text" class="mui-input-clear mui-input" placeholder="请输入条形码">
						</div>
						<div class="mui-input-row">
							<label>密码</label>
							<input id='get_pwd' onclick="shurufa_open_num(this)" readonly="readonly" type="password" class="mui-input-clear mui-input" placeholder="请输入密码">
						</div>
					</div> 
					<div class="mui-content-padded">						
						<button type="get_btn"  class="mui-btn mui-btn-block mui-btn-primary" id="get_order">确定</button>
					</div>
					<div class="mui-content-padded">
						<p>可选择输入条形码或者扫描条形码进行验证</p>
					</div> 									
			</div> 	
		</div>
		<!--单页结束--> 
		
		
		
		
		
		
		 <!--商户拒收包裹开始  这里的Get是关键字，所以需要变成小写 -->
		<div id="refuse" class="mui-page" style="z-index: 1;">
			<div class="mui-page-content mui-scroll-wrapper">
				<div class="mui-scroll">
					<div class="mui-input-group">
						<div class="mui-input-row">
							<label>条形码</label>
							<input id='refuse_orderid' onclick="shurufa_open_num(this)" readonly="readonly" type="text" class="mui-input-clear mui-input" placeholder="请输入条形码">
						</div>
						<h5 class="mui-content-padded">请选择拒收原因</h5>
						<ul id="refuse_ul" class="mui-table-view mui-table-view-radio">
							<li class="mui-table-view-cell">
								<a href="javascript:;" class="mui-navigate-right">
									无法签收成功
								</a>
							</li>
							<li class="mui-table-view-cell mui-selected">
								<a href="javascript:;" class="mui-navigate-right">
									包裹破损
								</a>
							</li>
							<li class="mui-table-view-cell">
								<a href="javascript:;" class="mui-navigate-right">
									包裹到付
								</a> 
							</li> 
							<li class="mui-table-view-cell">
								<a href="javascript:;" class="mui-navigate-right">
									超期无人领取，联系快递员收走
								</a>
							</li>
							<li class="mui-table-view-cell">
								<a href="javascript:;" class="mui-navigate-right">
									其他原因
								</a>
							</li>
						</ul>
					</div>  
					<div class="mui-content-padded">						
						<button type="button" class="mui-btn mui-btn-block mui-btn-primary" id="refuse_btn">确定</button>
					</div>
					<div class="mui-content-padded">
						<p>可选择输入条形码或者扫描条形码进行验证</p>
					</div> 
				</div> 	
			</div> 
		</div> 
		<!--单页结束--> 
		
		 
		
		 
		
	 
		
		
		<script src="../js/Zepto/zepto_1.1.3.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/mui/mui.min.lee.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/mui/mui.view.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/layermobile/layer.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/My_Js/shurufa.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/My_Js/global.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/My_Js/API.js" type="text/javascript" charset="utf-8"></script> 
		<script src="../js/My_Js/MyValidate.js" type="text/javascript" charset="utf-8"></script>

		<script type="text/javascript">
			
			
			//╠═╬═╬═╬═╬═╬═╬═╬═╬═╬═╣  全局变量   ╠═╬═╬═╬═╬═╬═╬═╬═╬═╬═╣
		 	var CustomerCode = localStorage.CustomerCode; //门店号
	   	 	var Operator = localStorage.EmployeeCode;	  //员工号
	   	 	var opt = {};//参数对象
	    	
		 	
	    	$(function()
			{
				幽灵输入法数字版html();
				mui('.mui-scroll-wrapper').scroll({
					deceleration: 0.0005 //flick 减速系数，系数越大，滚动速度越慢，滚动距离越小，默认值0.0006
				});
			}) 
			
			
			//菜鸟收包裹		 	
		 	document.getElementById("cainiaobaoguo_btn").addEventListener("tap",function()
		 	{
		 	     var cainiaobaoguo_orderid = document.getElementById("cainiaobaoguo_orderid").value; //通过扫码器扫描的条形码
		 		 
		 		 if(!Is_Null(cainiaobaoguo_orderid,"请扫描或者输入订单号")) return false;
		 		 
		 		 $("#cainiaobaoguo_btn").text("提交中，请稍后...");
		 		 
		 		 opt =
				 {
				 	"userCode":CustomerCode,
				 	"employeeCode":Operator,
				 	"mobile":"",
				 	"mailNo":cainiaobaoguo_orderid
				 }
				 
				 InvokeApi(GetApiUrl("B003_V0001_5un29"),"ApiClass", "ShouPackage", opt, "CYAPI_收包裹");
		 	})		 	
		 	
		 	
		 	//其他收包裹
		 	document.getElementById("qitabaoguo_btn").addEventListener("tap",function()
		 	{
		 		var qitabaoguo_orderid = document.getElementById("qitabaoguo_orderid").value;
		 		var qitabaoguo_phone = document.getElementById("qitabaoguo_phone").value;
		 	
		 	
		 		if(!Is_Null(qitabaoguo_orderid,"请扫描或者输入订单号")) return false;
		 		if(!Is_Null(qitabaoguo_phone,"请输入手机号码")) return false;
		 		if(!Is_Phone(qitabaoguo_phone,"请输入正确合法的手机号码")) return false;	
		 		
		 		 $("#qitabaoguo_btn").text("提交中，请稍后...");
		 		 
		 		 opt =
				 {
				 	"userCode":CustomerCode,
				 	"mailNo":qitabaoguo_orderid, //通过扫码器扫描的条形码
				 	"mobile":qitabaoguo_phone,
				 	"employeeCode":Operator
				 }	
				 //console.log(JSON.stringify(opt));
				 InvokeApi(GetApiUrl("B003_V0001_5un29"), "ApiClass", "ShouPackage", opt, "CYAPI_收包裹");
		 	})
		 			 	
		 	
		 	//顾客取包裹		 	
		 	document.getElementById("get_order").addEventListener("tap",function()
		 	{
		 		var get_orderid = document.getElementById("get_orderid").value;
		 		var get_pwd = document.getElementById("get_pwd").value;
		 		
		 		if(!Is_Null(get_orderid,"请扫描或者输入订单号")) return false;
		 		if(!Is_Null(get_pwd,"请输入密码")) return false;
		 		
		 		$("#get_order").text("提交中，请稍后...");
		 		
		 		opt = 
				{
				 	"userCode":CustomerCode,
				 	"mailNo":get_orderid, //通过扫码器扫描的条形码
				 	"password":get_pwd,
				 	"employeeCode":Operator
				}		 
				InvokeApi(GetApiUrl("B003_V0001_5un29"), "ApiClass", "QuPackage", opt, "CYAPI_取包裹");
	 		})
		 	
		 	
		 	//拒收包裹		 
		 	document.getElementById("refuse_btn").addEventListener("tap",function()
		 	{
	 			var refuse_orderid = document.getElementById("refuse_orderid").value;
			 	var rem =  $("#refuse_ul").find(".mui-selected").text();
			 	
			 	
			 	if(!Is_Null(refuse_orderid,"请扫描或者输入订单号")) return false;
		 		if(!Is_Null(rem,"请选择拒收原因")) return false;
		 		
		 		
			 	$("#refuse_btn").text("提交中，请稍后...");
			 	
		 		 opt = 
				 {
				 	"userCode":CustomerCode,
				 	"mailNo":refuse_orderid, //通过扫码器扫描的条形码
				 	"rem":rem,
				 	"employeeCode":Operator
				 }		 
				 InvokeApi(GetApiUrl("B003_V0001_5un29"), "ApiClass", "TuiPackage", opt, "CYAPI_拒绝包裹");
			})
			
		 	
		 	
		 	
		 	//------------------------
			CYAPI_收包裹= function(str)
		 	{
		 		setTimeout(function(){
		 			$("#cainiaobaoguo_btn,#qitabaoguo_btn").text("确定");
			 		var json = Api_filter(str);		 	
			 		mui.alert(json.retMessage,function(){
			 				mui.toast(json.retMessage);
		 			});
		 		},1000);
		 	}		 	
		 	CYAPI_取包裹 = function(str)
		 	{
	 			setTimeout(function(){
		 			$("#get_order").text("确定");
			 		var json = Api_filter(str);		 	
			 		mui.alert(json.retMessage,function(){
			 				mui.toast(json.retMessage);
		 			});
		 		},1000);
		 	}		 	 
		 	CYAPI_拒绝包裹 = function(str)
		 	{	 			
	 			setTimeout(function()
	 			{
		 			$("#refuse_btn").text("确定");
			 		var json = Api_filter(str);		 	
			 		mui.alert(json.retMessage,function(){
			 				mui.toast(json.retMessage);
		 			});
		 		},1000);
		 	}	
		 
			   
			//∏∏∏∏∏∏∏∏∏∏∏∏∏∏∏∏ 以下区域不必改动 ∏∏∏∏∏∏∏∏∏∏∏∏∏∏∏∏
							
				//初始化单页view
				var viewApi = mui('#app').view({
					defaultPage: '#Main'
				});
			
			
				var view = viewApi.view;
				(function($) {
					//处理view的后退与webview后退
					var oldBack = $.back;
					$.back = function() {
						if (viewApi.canBack()) { //如果view可以后退，则执行view的后退
							viewApi.back();
						} else { //执行webview后退
							oldBack();
						}
					};
					//监听页面切换事件方案1,通过view元素监听所有页面切换事件，目前提供pageBeforeShow|pageShow|pageBeforeBack|pageBack四种事件(before事件为动画开始前触发)
					//第一个参数为事件名称，第二个参数为事件回调，其中e.detail.page为当前页面的html对象
					view.addEventListener('pageBeforeShow', function(e) {
						//				console.log(e.detail.page.id + ' beforeShow');
					});
					view.addEventListener('pageShow', function(e) {
						//				console.log(e.detail.page.id + ' show');
					});
					view.addEventListener('pageBeforeBack', function(e) {
						//				console.log(e.detail.page.id + ' beforeBack');
					});
					view.addEventListener('pageBack', function(e) {
						//				console.log(e.detail.page.id + ' back');
					});
				})(mui);
			</script>
	</body>

</html>